<div class="container mt-4">
  <h2>Danh s√°ch t√†i kho·∫£n</h2>

  <!-- √î t√¨m ki·∫øm -->
  <input type="text" class="form-control mb-3" placeholder="üîç T√¨m ki·∫øm username..." [(ngModel)]="searchQuery" (input)="onSearchChange()">

  <!-- N√∫t Th√™m Ng∆∞·ªùi D√πng M·ªõi -->
  <button class="btn btn-success mb-3" (click)="showAddUserForm = !showAddUserForm">
    ‚ûï Th√™m Ng∆∞·ªùi D√πng M·ªõi
  </button>

  <!-- Form Th√™m Ng∆∞·ªùi D√πng M·ªõi -->
  <div *ngIf="showAddUserForm" class="card p-3 mb-4">
    <h3>Th√™m T√†i Kho·∫£n M·ªõi</h3>
    <form [formGroup]="addUserForm" (ngSubmit)="addUser()">
      <div class="mb-3">
        <label class="form-label">Username:</label>
        <input type="text" class="form-control" formControlName="username" required>
      </div>
      <div class="mb-3">
        <label class="form-label">M·∫≠t kh·∫©u:</label>
        <input type="password" class="form-control" formControlName="password" required>
      </div>
      <div class="mb-3">
        <label class="form-label">Role:</label>
        <select class="form-control" formControlName="role">
          <option value="user">User</option>
          <option value="admin">Admin</option>
        </select>
      </div>
      <button type="submit" class="btn btn-primary">Th√™m Ng∆∞·ªùi D√πng</button>
      <button type="button" class="btn btn-secondary ms-2" (click)="showAddUserForm = false">H·ªßy</button>
    </form>
  </div>

  <table class="table table-bordered">
    <thead class="table-dark">
      <tr>
        <th>ID</th>
        <th>Username</th>
        <th>Role</th>
        <th>H√†nh ƒë·ªông</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of users">
        <td>{{ user._id }}</td>
        <td>{{ user.username }}</td>
        <td>{{ user.role }}</td>
        <td>
          <button class="btn btn-warning btn-sm me-2" (click)="editUser(user)">S·ª≠a</button>
          <button class="btn btn-danger btn-sm" (click)="deleteUser(user._id)">X√≥a</button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Ph√¢n trang -->
  <div class="pagination mt-3">
    <button class="btn btn-secondary" [disabled]="currentPage === 1" (click)="changePage(currentPage - 1)">‚ùÆ Tr∆∞·ªõc</button>
    <span class="mx-2">Trang {{ currentPage }} / {{ totalPages }}</span>
    <button class="btn btn-secondary" [disabled]="currentPage === totalPages" (click)="changePage(currentPage + 1)">Ti·∫øp ‚ùØ</button>
  </div>

  <!-- Form ch·ªânh s·ª≠a user -->
  <div *ngIf="selectedUser" class="mt-4">
    <h3>Ch·ªânh s·ª≠a t√†i kho·∫£n</h3>
    <form [formGroup]="editForm" (ngSubmit)="updateUser()">
      <div class="mb-3">
        <label class="form-label">Username:</label>
        <input type="text" class="form-control" formControlName="username">
      </div>
      <div class="mb-3">
        <label class="form-label">Role:</label>
        <select class="form-control" formControlName="role">
          <option value="user">User</option>
          <option value="admin">Admin</option>
        </select>
      </div>
      <button type="submit" class="btn btn-primary">L∆∞u thay ƒë·ªïi</button>
      <button type="button" class="btn btn-secondary ms-2" (click)="selectedUser = null">H·ªßy</button>
    </form>
  </div>
</div>
